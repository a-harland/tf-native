{"format_version":"0.1","terraform_version":"1.0.0","planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.iam.google_service_account.service_account","mode":"managed","type":"google_service_account","name":"service_account","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"account_id":"spi-service-account","description":"","disabled":false,"display_name":"Service Account","email":"spi-service-account@blue-dog-piano.iam.gserviceaccount.com","id":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","name":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","timeouts":null,"unique_id":"106040459068366968039"}}],"address":"module.iam"},{"resources":[{"address":"module.notification.google_pubsub_topic.notifications","mode":"managed","type":"google_pubsub_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"id":"projects/blue-dog-piano/topics/spi-notification-topic-ccf","kms_key_name":"","labels":{"cmdb_id":"al12345"},"message_storage_policy":[],"name":"spi-notification-topic-ccf","project":"blue-dog-piano","schema_settings":[],"timeouts":null}},{"address":"module.notification.google_pubsub_topic_iam_member.member","mode":"managed","type":"google_pubsub_topic_iam_member","name":"member","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"condition":[],"member":"serviceAccount:spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","role":"roles/pubsub.subscriber","topic":"projects/blue-dog-piano/topics/spi-notification-topic-ccf"}}],"address":"module.notification"}]}},"resource_changes":[{"address":"module.iam.google_service_account.service_account","module_address":"module.iam","mode":"managed","type":"google_service_account","name":"service_account","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["no-op"],"before":{"account_id":"spi-service-account","description":"","disabled":false,"display_name":"Service Account","email":"spi-service-account@blue-dog-piano.iam.gserviceaccount.com","id":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","name":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","timeouts":null,"unique_id":"106040459068366968039"},"after":{"account_id":"spi-service-account","description":"","disabled":false,"display_name":"Service Account","email":"spi-service-account@blue-dog-piano.iam.gserviceaccount.com","id":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","name":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","timeouts":null,"unique_id":"106040459068366968039"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.notification.google_pubsub_topic.notifications","module_address":"module.notification","mode":"managed","type":"google_pubsub_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["update"],"before":{"id":"projects/blue-dog-piano/topics/spi-notification-topic-ccf","kms_key_name":"","labels":{},"message_storage_policy":[],"name":"spi-notification-topic-ccf","project":"blue-dog-piano","schema_settings":[],"timeouts":null},"after":{"id":"projects/blue-dog-piano/topics/spi-notification-topic-ccf","kms_key_name":"","labels":{"cmdb_id":"al12345"},"message_storage_policy":[],"name":"spi-notification-topic-ccf","project":"blue-dog-piano","schema_settings":[],"timeouts":null},"after_unknown":{},"before_sensitive":{"labels":{},"message_storage_policy":[],"schema_settings":[]},"after_sensitive":{"labels":{},"message_storage_policy":[],"schema_settings":[]}}},{"address":"module.notification.google_pubsub_topic_iam_member.member","module_address":"module.notification","mode":"managed","type":"google_pubsub_topic_iam_member","name":"member","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["delete","create"],"before":{"condition":[],"etag":"BwXP9Ws7hOQ=","id":"projects/blue-dog-piano/topics/spi-notification-topic-ccf/roles/pubsub.publisher/serviceAccount:spi-service-account@blue-dog-piano.iam.gserviceaccount.com","member":"serviceAccount:spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","role":"roles/pubsub.publisher","topic":"projects/blue-dog-piano/topics/spi-notification-topic-ccf"},"after":{"condition":[],"member":"serviceAccount:spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","role":"roles/pubsub.subscriber","topic":"projects/blue-dog-piano/topics/spi-notification-topic-ccf"},"after_unknown":{"condition":[],"etag":true,"id":true},"before_sensitive":{"condition":[]},"after_sensitive":{"condition":[]},"replace_paths":[["role"]]},"action_reason":"replace_because_cannot_update"}],"prior_state":{"format_version":"0.1","terraform_version":"1.0.0","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.iam.google_service_account.service_account","mode":"managed","type":"google_service_account","name":"service_account","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"account_id":"spi-service-account","description":"","disabled":false,"display_name":"Service Account","email":"spi-service-account@blue-dog-piano.iam.gserviceaccount.com","id":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","name":"projects/blue-dog-piano/serviceAccounts/spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","timeouts":null,"unique_id":"106040459068366968039"}}],"address":"module.iam"},{"resources":[{"address":"module.notification.google_pubsub_topic.notifications","mode":"managed","type":"google_pubsub_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"id":"projects/blue-dog-piano/topics/spi-notification-topic-ccf","kms_key_name":"","labels":{},"message_storage_policy":[],"name":"spi-notification-topic-ccf","project":"blue-dog-piano","schema_settings":[],"timeouts":null}},{"address":"module.notification.google_pubsub_topic_iam_member.member","mode":"managed","type":"google_pubsub_topic_iam_member","name":"member","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"condition":[],"etag":"BwXP9Ws7hOQ=","id":"projects/blue-dog-piano/topics/spi-notification-topic-ccf/roles/pubsub.publisher/serviceAccount:spi-service-account@blue-dog-piano.iam.gserviceaccount.com","member":"serviceAccount:spi-service-account@blue-dog-piano.iam.gserviceaccount.com","project":"blue-dog-piano","role":"roles/pubsub.publisher","topic":"projects/blue-dog-piano/topics/spi-notification-topic-ccf"},"depends_on":["module.iam.google_service_account.service_account","module.notification.google_pubsub_topic.notifications"]}],"address":"module.notification"}]}}},"configuration":{"provider_config":{"google":{"name":"google","expressions":{"project":{"constant_value":"blue-dog-piano"}}},"google-beta":{"name":"google-beta","expressions":{"project":{"constant_value":"blue-dog-piano"}}},"random":{"name":"random","version_constraint":"3.0.1"}},"root_module":{"module_calls":{"iam":{"source":"../../modules/iam","expressions":{"service_account_name":{"constant_value":"spi-service-account"}},"module":{"outputs":{"service_account_email":{"expression":{"references":["google_service_account.service_account"]}}},"resources":[{"address":"google_service_account.service_account","mode":"managed","type":"google_service_account","name":"service_account","provider_config_key":"iam:google","expressions":{"account_id":{"references":["var.service_account_name"]},"display_name":{"constant_value":"Service Account"}},"schema_version":0}],"variables":{"service_account_name":{"description":"Name of the service account to create."}}}},"notification":{"source":"../../modules/notifications","expressions":{"name":{"constant_value":"ccf"},"project_id":{"references":["local.project_id"]},"publisher_sa":{"references":["module.iam.service_account_email"]}},"module":{"resources":[{"address":"google_pubsub_topic.notifications","mode":"managed","type":"google_pubsub_topic","name":"notifications","provider_config_key":"notification:google","expressions":{"labels":{"constant_value":{"cmdb_id":"al12345"}},"name":{"references":["var.name"]},"project":{"references":["var.project_id"]}},"schema_version":0},{"address":"google_pubsub_topic_iam_member.member","mode":"managed","type":"google_pubsub_topic_iam_member","name":"member","provider_config_key":"notification:google","expressions":{"member":{"references":["var.publisher_sa"]},"project":{"references":["var.project_id"]},"role":{"constant_value":"roles/pubsub.subscriber"},"topic":{"references":["google_pubsub_topic.notifications"]}},"schema_version":0}],"variables":{"name":{"description":"Name of the value stream creating the notifications topic."},"project_id":{"description":"GCP Project ID."},"publisher_sa":{"description":"Service account used for publishing messages."}}}}}}}}
